<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Calibre+rclone+google drive搭建个人书库记录 | GodLin&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/icons/logo.png">
    <link rel="apple-touch-icon" href="/images/icons/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script type="text/javascript" src="/assets/js/load.js"></script>
    <meta name="description" content="利用calibre和rclone搭建个人书库">
    <meta name="image" content="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184446.png">
    <meta name="twitter:title" content="Calibre+rclone+google drive搭建个人书库记录">
    <meta name="twitter:description" content="利用calibre和rclone搭建个人书库">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184446.png">
    <meta name="twitter:url" content="https://notes.crushing.xyz/%E4%B8%BB%E7%AB%99%E6%89%80%E6%9C%89(%E5%BE%85%E6%95%B4%E7%90%86)/Calibre-rclone-google-drive%E6%90%AD%E5%BB%BA%E4%B9%A6%E5%BA%93%E6%8A%8A%E7%8E%A9.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Calibre+rclone+google drive搭建个人书库记录">
    <meta property="og:description" content="利用calibre和rclone搭建个人书库">
    <meta property="og:image" content="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184446.png">
    <meta property="og:url" content="https://notes.crushing.xyz/%E4%B8%BB%E7%AB%99%E6%89%80%E6%9C%89(%E5%BE%85%E6%95%B4%E7%90%86)/Calibre-rclone-google-drive%E6%90%AD%E5%BB%BA%E4%B9%A6%E5%BA%93%E6%8A%8A%E7%8E%A9.html">
    <meta property="og:site_name" content="Gentleman.Hu">
    <meta property="article:published_time" content="2020-08-02T18:40:38.000Z">
    <meta property="article:tag" content="个人书库">
    <meta itemprop="name" content="Calibre+rclone+google drive搭建个人书库记录">
    <meta itemprop="description" content="利用calibre和rclone搭建个人书库">
    <meta itemprop="image" content="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184446.png">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="keywords" content="godlin,vue,vuepress,vuepress-theme,theme,主题,vuepress主题,blog
        ,vuepress-blog,java,python,loa,LOA,Law of Attraction,引力法则,冥想,meditation,shell,spiritual,sql,golang,script,mac,黑苹果,shell script,nginx,windows,linux,android studio,google drive
        ,onedrive,idea,android,git,小程序">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.989b2dde.css" as="style"><link rel="preload" href="/assets/js/app.11c9bfda.js" as="script"><link rel="preload" href="/assets/js/3.3d97394a.js" as="script"><link rel="preload" href="/assets/js/19.6010e3f8.js" as="script"><link rel="prefetch" href="/assets/js/10.80fbe661.js"><link rel="prefetch" href="/assets/js/11.567842b4.js"><link rel="prefetch" href="/assets/js/12.ea2ec061.js"><link rel="prefetch" href="/assets/js/13.5262fa7e.js"><link rel="prefetch" href="/assets/js/14.bf7bba6c.js"><link rel="prefetch" href="/assets/js/15.21ad4831.js"><link rel="prefetch" href="/assets/js/16.1a61b0eb.js"><link rel="prefetch" href="/assets/js/17.203200e8.js"><link rel="prefetch" href="/assets/js/18.fa7fbd6a.js"><link rel="prefetch" href="/assets/js/20.eef73132.js"><link rel="prefetch" href="/assets/js/21.00db98f0.js"><link rel="prefetch" href="/assets/js/22.6ab9a44f.js"><link rel="prefetch" href="/assets/js/23.7f16f062.js"><link rel="prefetch" href="/assets/js/24.c839839f.js"><link rel="prefetch" href="/assets/js/25.03bb49e3.js"><link rel="prefetch" href="/assets/js/26.1c5951c7.js"><link rel="prefetch" href="/assets/js/27.b5e79c1f.js"><link rel="prefetch" href="/assets/js/28.517f064f.js"><link rel="prefetch" href="/assets/js/29.df62bee7.js"><link rel="prefetch" href="/assets/js/30.e6d0bfb0.js"><link rel="prefetch" href="/assets/js/31.17aafeae.js"><link rel="prefetch" href="/assets/js/32.0e44958b.js"><link rel="prefetch" href="/assets/js/33.c4bbc604.js"><link rel="prefetch" href="/assets/js/34.5e14246b.js"><link rel="prefetch" href="/assets/js/35.929c9863.js"><link rel="prefetch" href="/assets/js/36.d615b965.js"><link rel="prefetch" href="/assets/js/37.41d9aa02.js"><link rel="prefetch" href="/assets/js/38.8468bf9c.js"><link rel="prefetch" href="/assets/js/39.e443d737.js"><link rel="prefetch" href="/assets/js/4.f4ebb56a.js"><link rel="prefetch" href="/assets/js/40.fc7e0a41.js"><link rel="prefetch" href="/assets/js/41.c4eb69c7.js"><link rel="prefetch" href="/assets/js/5.e4033033.js"><link rel="prefetch" href="/assets/js/6.24ad733c.js"><link rel="prefetch" href="/assets/js/7.ea0008c0.js"><link rel="prefetch" href="/assets/js/8.eae8d36a.js"><link rel="prefetch" href="/assets/js/9.064f8086.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.8d269fb4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.989b2dde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icons/logo.png" alt="GodLin's Blog" class="logo"> <span class="site-name can-hide">GodLin's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Old/" class="nav-link">
  Old
</a></div><div class="nav-item"><a href="/主站所有(待整理)/" class="nav-link">
  主站所有(待整理)
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://crushing.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客主站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link">
  文件
</a></li></ul></li></ul></div></div> <a href="https://github.com/GentlemanHu/clean_notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Old/" class="nav-link">
  Old
</a></div><div class="nav-item"><a href="/主站所有(待整理)/" class="nav-link">
  主站所有(待整理)
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://crushing.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客主站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link">
  文件
</a></li></ul></li></ul></div></div> <a href="https://github.com/GentlemanHu/clean_notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>主站所有(待整理)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/主站所有(待整理)/Azure中WindowsServer没GUI.html" class="sidebar-link">Azure中WindowsServer没GUI</a></li><li><a href="/主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.html" class="active sidebar-link">Calibre+rclone+google drive搭建个人书库记录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.html#一、calibre-web搭建与配置" class="sidebar-link">一、Calibre-web搭建与配置</a></li><li class="sidebar-sub-header"><a href="/主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.html#二、rclone挂载gd" class="sidebar-link">二、rclone挂载GD</a></li><li class="sidebar-sub-header"><a href="/主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.html#三、calibre安装与书库配置" class="sidebar-link">三、calibre安装与书库配置</a></li><li class="sidebar-sub-header"><a href="/主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.html#resources" class="sidebar-link">Resources</a></li></ul></li><li><a href="/主站所有(待整理)/Clover配置引导Linux内核.html" class="sidebar-link">Clover配置引导Linux内核</a></li><li><a href="/主站所有(待整理)/Docker运行macOS-Docker-OSX.html" class="sidebar-link">Docker运行macOS?Docker-OSX</a></li><li><a href="/主站所有(待整理)/GitHub-Archive-Program-我的祖传代码.html" class="sidebar-link">GitHub Archive Program,我的祖传代码</a></li><li><a href="/主站所有(待整理)/Github官方云端IDE——CodeSpaces.html" class="sidebar-link">Github官方云端IDE——CodeSpaces</a></li><li><a href="/主站所有(待整理)/Google在线深度学习神器colab把玩.html" class="sidebar-link">Google在线深度学习神器colab把玩</a></li><li><a href="/主站所有(待整理)/Java基操之Stream.html" class="sidebar-link">Java基操之Stream</a></li><li><a href="/主站所有(待整理)/Java工具之jenkins.html" class="sidebar-link">Java工具之jenkins</a></li><li><a href="/主站所有(待整理)/Java并发之java-util-concurrent包Overview.html" class="sidebar-link">Java并发之java.util.concurrent包Overview</a></li><li><a href="/主站所有(待整理)/Java开发工具之Maven.html" class="sidebar-link">Java开发工具之Maven</a></li><li><a href="/主站所有(待整理)/Java集合相关问题.html" class="sidebar-link">Java探索之集合</a></li><li><a href="/主站所有(待整理)/Kotlin开发总结.html" class="sidebar-link">Kotlin开发总结</a></li><li><a href="/主站所有(待整理)/Linux剑客之sed.html" class="sidebar-link">Linux剑客之sed</a></li><li><a href="/主站所有(待整理)/Linux命令之cut.html" class="sidebar-link">Linux命令之cut</a></li><li><a href="/主站所有(待整理)/Linux命令之xargs.html" class="sidebar-link">Linux命令之xargs</a></li><li><a href="/主站所有(待整理)/Linux神器之asciinema.html" class="sidebar-link">Linux神器之asciinema</a></li><li><a href="/主站所有(待整理)/Linux神器之tldr.html" class="sidebar-link">Linux神器之tldr</a></li><li><a href="/主站所有(待整理)/Theia-可高度定制的IDE-兼容VSCode插件.html" class="sidebar-link">Theia,可高度定制的IDE,兼容VSCode插件</a></li><li><a href="/主站所有(待整理)/backdrop-filter毛玻璃效果.html" class="sidebar-link">backdrop-filter毛玻璃效果</a></li><li><a href="/主站所有(待整理)/git-submodule-git子模块闲搞.html" class="sidebar-link">git submodule git子模块闲搞</a></li><li><a href="/主站所有(待整理)/ide般的vim-SpaceVim.html" class="sidebar-link">ide般的vim--SpaceVim</a></li><li><a href="/主站所有(待整理)/关于invoke和call的区别.html" class="sidebar-link">关于invoke和call的区别</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <blockquote><p>记录了一些折腾过程</p></blockquote> <details><summary>一些缘由</summary> <h3 id="e5"><a href="#e5" class="header-anchor">#</a> E5</h3> <ol><li><p>前一段微软开发者E5订阅很火热，也顺手申请了一个，主要还是看上<code>OneDrive</code>的存储，E5可以拥有25个子账号，所以空间至少<code>25x5T</code>，当然也用不了这么多。</p></li> <li><p>由于E5可能是参照开发者使用情况续订的，所以同时也部署了<a href="https://github.com/GentlemanHu/OwnE5" target="_blank" rel="noopener noreferrer"><code>自动调用API续订</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>程序来尝试维持续订。</p></li> <li><p>搭建了各种索引程序作为个人网盘，总之，尝试了多款，各有优势吧。</p></li></ol> <h3 id="teamdrive"><a href="#teamdrive" class="header-anchor">#</a> TeamDrive</h3> <ol><li><p>GoogleDrive订阅G Suit教育版或者商业版是无限容量的（$$$)，教育邮箱之前搞过一个，翻车了。</p></li> <li><p>偶然发现还有TeamDrive也是无限容量，就也顺手搞了一个玩玩看。</p></li> <li><p>又发现各种玩法，转存什么的，利用SA账号转存，TG机器人转存等，顺手也搭建了。</p> <blockquote><p><a href="https://github.com/iwestlin/gd-utils" target="_blank" rel="noopener noreferrer">gd-utils<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li></ol> <h3 id="个人演示站"><a href="#个人演示站" class="header-anchor">#</a> 个人演示站</h3> <ul><li>OD（暂不）</li> <li>GD
<ul><li>https://pie.holyfuck.ml</li> <li>https://pie.keepfuture.live</li></ul></li></ul> <h3 id="折腾开始"><a href="#折腾开始" class="header-anchor">#</a> 折腾开始</h3> <ul><li>各种离线下载，转存机器人也都玩过了，就想玩玩新鲜的。</li> <li>于是想到了搭建个人书库，利用这些<code>强大的</code>存储作支持。</li> <li>当然，OD和GD都是可以的，但是看到<code>calibre-web</code>这款管理面板原生支持GD，就选择了GD</li></ul></details> <h2 id="一、calibre-web搭建与配置"><a href="#一、calibre-web搭建与配置" class="header-anchor">#</a> 一、Calibre-web搭建与配置</h2> <h3 id="安装部署"><a href="#安装部署" class="header-anchor">#</a> 安装部署</h3> <h4 id="py依赖部署版"><a href="#py依赖部署版" class="header-anchor">#</a> py依赖部署版</h4> <p><a href="https://github.com/janeczku/calibre-web" target="_blank" rel="noopener noreferrer">calibre-web<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone 仓库
<span class="token builtin class-name">cd</span> 
<span class="token comment"># python3 (python3.x) </span>
pip3 <span class="token function">install</span> --target vendor -r requirements.txt 
<span class="token comment"># (python2.7).</span>
pip <span class="token function">install</span> --target vendor -r requirements.txt 
</code></pre></div><p>执行启动命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code>python cps.py
或者 
<span class="token function">nohup</span> python cps.py
</code></pre></div><p>至此，calibre的面板calibre-web搭建成功，接下来跟GD存储端对接。</p> <p>面板原生支持GD</p> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184446.png" alt=""></p> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184359.png" alt=""></p> <p><a href="https://github.com/janeczku/calibre-web/wiki/Configuration#using-google-drive-integration" target="_blank" rel="noopener noreferrer">doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>由于某些原因，采用下边rclone挂载GD方式。</p> <h4 id="docker版"><a href="#docker版" class="header-anchor">#</a> <s>docker版</s></h4> <blockquote><p>docker安装可谓最简单，可惜各种折腾未成功，还是一般安装吧~</p> <p>⚠️以下只是记录了报错等信息，尝试修复过程</p></blockquote> <p><a href="https://hub.docker.com/r/linuxserver/calibre-web/" target="_blank" rel="noopener noreferrer">calibre-docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> create <span class="token punctuation">\</span>
  --name<span class="token operator">=</span>calibre-web <span class="token punctuation">\</span>
  -e <span class="token assign-left variable">PUID</span><span class="token operator">=</span><span class="token number">1000</span> <span class="token punctuation">\</span>
  -e <span class="token assign-left variable">PGID</span><span class="token operator">=</span><span class="token number">1000</span> <span class="token punctuation">\</span>
  -e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Europe/London <span class="token punctuation">\</span>
  -e <span class="token assign-left variable">DOCKER_MODS</span><span class="token operator">=</span>linuxserver/calibre-web:calibre <span class="token punctuation">\</span>
  -p <span class="token number">8083</span>:8083 <span class="token punctuation">\</span>
  -v /media/config:/config <span class="token punctuation">\</span>
  -v /media/Books:/books <span class="token punctuation">\</span>
  --restart unless-stopped <span class="token punctuation">\</span>
  linuxserver/calibre-web
</code></pre></div><ul><li><p>安装好之后，尽管已经映射，docker容器内不能读取到从host外部共享到内部的目录，所以，挂载的GD也就不能用。</p></li> <li><p>找了一番，有个rclone-mount的docker镜像是专门为此而生。</p> <blockquote><p><a href="https://github.com/tynor88/docker-rclone-mount" target="_blank" rel="noopener noreferrer">rclone-mount-docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://hub.docker.com/r/mumiehub/rclone-mount/" target="_blank" rel="noopener noreferrer">Docker-rclone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li> <li><p><code>docker build -t rclone-docker:rclone .</code></p></li> <li><p><code>docker run -t -i rclone-docker:rclone /bin/bash</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> start rclone-mount
Error response from daemon: oci runtime error: container_linux.go:235: starting container process caused <span class="token string">&quot;process_linux.go:339: running prestart hook 2 caused <span class="token entity" title="\&quot;">\&quot;</span>error running hook: exit status 1, stdout: , stderr: <span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>
Error: failed to start containers: rclone-mount
</code></pre></div></li> <li><p>报错,google后需要在linux内核启动namespace什么的，下边是教程</p></li> <li><p>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/getting_started_with_containers/index#user_namespaces_options</p></li></ul> <blockquote><p>然而需要重启，由于部署了一堆闲玩的东西，很多没部署service自启动，重启后说不定就不知道到在哪启动了，所以放弃。</p></blockquote> <h3 id="后台配置"><a href="#后台配置" class="header-anchor">#</a> 后台配置</h3> <blockquote><p>详见下边第三步</p></blockquote> <h2 id="二、rclone挂载gd"><a href="#二、rclone挂载gd" class="header-anchor">#</a> 二、rclone挂载GD</h2> <h3 id="普通版"><a href="#普通版" class="header-anchor">#</a> 普通版</h3> <h4 id="安装rclone"><a href="#安装rclone" class="header-anchor">#</a> 安装<a href="https://rclone.org/install/#script-installation" target="_blank" rel="noopener noreferrer">rclone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h4 id="配置gd并挂载"><a href="#配置gd并挂载" class="header-anchor">#</a> 配置GD并挂载</h4> <ul><li><p><code>rclone config</code></p> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200802185121351.png" alt="image-20200802185121351"></p> <blockquote><p>新建remote</p></blockquote> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200802185159925.png" alt="image-20200802185159925"></p> <blockquote><p>选13（具体看版本），google drive</p> <p>client_id和secret_id可以不写，默认用的官方的。</p> <p>接下来都选1</p></blockquote> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200802185330214.png" alt="image-20200802185330214"></p></li></ul> <blockquote><p>根据提示，验证那里，由于是在vps没显示器，选n，点开链接验证后，复制代码到下边。</p> <p>配置成TeamDrive</p> <p>然后一路yes就行了</p></blockquote> <h4 id="挂载磁盘点-配置自启动"><a href="#挂载磁盘点-配置自启动" class="header-anchor">#</a> 挂载磁盘点，配置自启动</h4> <ul><li>新建挂载文件夹，我建在<code>/media/Books</code></li> <li>配置service自启动</li></ul> <p>将下边脚本改好后，新建service</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span> /usr/lib/systemd/system/books.service
</code></pre></div><p>下边复制到新建的service中</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Rclone
<span class="token assign-left variable">After</span><span class="token operator">=</span>network-online.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>simple
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/rclone <span class="token function">mount</span> Books:/ /media/Books/ --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 --vfs-cache-mode writes <span class="token comment">#针对calibre读取数据库加的</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abort
<span class="token assign-left variable">User</span><span class="token operator">=</span>root

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>default.target
</code></pre></div><blockquote><p>需要改两个地方，<code>Books:/</code> 和 <code>/media/Books</code>，第一个为rclone配置的名称，第二个为本地挂载点。</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>systemctl daemon-reload<span class="token punctuation">;</span>
systemctl restart books<span class="token punctuation">;</span>
<span class="token comment"># 查看状态</span>
systemctl status books -l<span class="token punctuation">;</span>
<span class="token comment">## 开机自启</span>
systemctl <span class="token builtin class-name">enable</span> books<span class="token punctuation">;</span>
</code></pre></div><p>进入挂载点，ls能看到盘内容，成功~</p> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200804122150879.png" alt="image-20200804122150879"></p> <h3 id="docker版-2"><a href="#docker版-2" class="header-anchor">#</a> <s>docker版</s></h3> <blockquote><p>docker得折腾更多，就不用了</p> <p>下边只贴上了启动参数</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name rclone-mount <span class="token punctuation">\</span>
    --restart<span class="token operator">=</span>unless-stopped <span class="token punctuation">\</span>
    --cap-add SYS_ADMIN <span class="token punctuation">\</span>
    --device /dev/fuse <span class="token punctuation">\</span>
    --security-opt apparmor:unconfined <span class="token punctuation">\</span>
    -e <span class="token assign-left variable">RemotePath</span><span class="token operator">=</span><span class="token string">&quot;Bookgo:&quot;</span> <span class="token punctuation">\</span>
    -e <span class="token assign-left variable">MountCommands</span><span class="token operator">=</span><span class="token string">&quot;--copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 --vfs-cache-mode writes&quot;</span> <span class="token punctuation">\</span>
    -v /root/.config/rclone:/config <span class="token punctuation">\</span>
    -v /media/Books:/mnt/mediaefs:shared <span class="token punctuation">\</span>
    mumiehub/rclone-mount
</code></pre></div><h2 id="三、calibre安装与书库配置"><a href="#三、calibre安装与书库配置" class="header-anchor">#</a> 三、calibre安装与书库配置</h2> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184755.png" alt=""></p> <p>安装成功，并配置好书库后，进入web登录后就是这样的界面。</p> <blockquote><p>然而，第一步中安装好的web面板，第一次登录，会让你设置书库地址，路径内必须有<code>metadata.db</code>书库的数据库文件。</p> <p>⚠️如果第一次用的话，没有metadata.db，必须手动搞一个，或者下载<a href="https://drive.google.com/file/d/189tv5i5SNT6rivLLLvCmC2JeLtODmSS1/view?usp=sharing" target="_blank" rel="noopener noreferrer">这个<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>空白的书库放在路径内。</p></blockquote> <h3 id="初始化配置"><a href="#初始化配置" class="header-anchor">#</a> 初始化配置</h3> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200804142346644.png" alt=""></p> <ul><li><p>这样，输入初始admin，admin123用户登入，其他后台自行设置就行了</p></li> <li><p>初始密码及时更改</p> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200804142454950.png" alt="image-20200804142454950"></p> <p>功能还可以，有自动推送kindle功能。</p></li> <li><p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200804142552774.png" alt="image-20200804142552774"></p></li> <li><p>还有格式转换等，需要自行下载插件，路径配置好。</p></li></ul> <h3 id="导入书库"><a href="#导入书库" class="header-anchor">#</a> 导入书库</h3> <ul><li>上一步初始化后，书库只有一本Quick Start默认书</li> <li>可以通过面板上传按钮自行上传</li> <li>也可以通过calibre命令行导入其他一些书库</li></ul> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/20200802184602.png" alt=""></p> <h4 id="创建calibre数据库"><a href="#创建calibre数据库" class="header-anchor">#</a> 创建calibre数据库</h4> <blockquote><p>这里需要用到calibre官方程序，尽管在vps不能可视化操作，但是命令行能用，导入书籍信息，自动归类等还是很好用</p></blockquote> <ul><li><ol><li>下载安装calibre
<a href="https://calibre-ebook.com/download_linux" target="_blank" rel="noopener noreferrer">download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <blockquote><p>仔细参照官方要求环境安装，如果环境不匹配，很折腾</p> <p>python：2.7.9+（❤️)</p> <p>gcc: 5.4.0+</p> <p>具体看安装时候提示信息，不匹配会出现各种问题</p></blockquote></li> <li><ol start="2"><li>使用<code>calibredb</code>命令将个人书籍导入数据库</li></ol></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>calibredb <span class="token function">add</span> <span class="token string">&quot;/media/Books/代码相关&quot;</span> --add --duplicates --ignore <span class="token string">&quot;*.md&quot;</span> --recurse --library-path<span class="token operator">=</span>/root/tmp/bookslib
</code></pre></div><p>上述表示递归添加<code>media/Books/代码相关</code>目录下所有支持图书，不含<code>md</code>，并允许重复，最后规定了<code>metadata.db</code>的路径</p> <blockquote><p>其他指令参照官方man<a href="https://manual.calibre-ebook.com/generated/en/calibredb.html" target="_blank" rel="noopener noreferrer">手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h4 id="kindle推送配置"><a href="#kindle推送配置" class="header-anchor">#</a> kindle推送配置</h4> <blockquote><p>详见后台配置</p></blockquote> <h4 id="opds配置"><a href="#opds配置" class="header-anchor">#</a> opds配置</h4> <blockquote><p>https://site/opds</p> <p>站点后加<code>opds</code>就是opds地址，导入其他软件可用</p></blockquote> <p><img src="https://gitee.com/gentlemanhu/public-store/raw/master//images/image-20200804105005437.png" alt="image-20200804105005437"></p> <h3 id="愉快看书-收藏"><a href="#愉快看书-收藏" class="header-anchor">#</a> 愉快看书(收藏)</h3> <ul><li><p>https://taotao.521521.ml  导入了GD珍藏的几个T的书库</p></li> <li><p>https://book.crushing.xyz  演示，只有一本</p> <blockquote><p>利用OD和GD大容量，个人图书馆，爽~</p> <p>也许只是收藏吧~😑</p></blockquote></li></ul> <hr> <blockquote><p>更多配置细节还得看个人需求</p> <p>记录探索，探索记录</p></blockquote> <h2 id="resources"><a href="#resources" class="header-anchor">#</a> Resources</h2> <ul><li><p><a href="https://rclone.org/install/#script-installation" target="_blank" rel="noopener noreferrer">rclone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://calibre-ebook.com/" target="_blank" rel="noopener noreferrer">Calibre<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://github.com/janeczku/calibre-web" target="_blank" rel="noopener noreferrer">Calibre-web<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://github.com/iwestlin/gd-utils" target="_blank" rel="noopener noreferrer">Gd-utils<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/GentlemanHu/clean_notes/edit/master//主站所有(待整理)/Calibre-rclone-google-drive搭建书库把玩.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022-03-20 15:35:35</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/主站所有(待整理)/Azure中WindowsServer没GUI.html" class="prev">
        Azure中WindowsServer没GUI
      </a></span> <span class="next"><a href="/主站所有(待整理)/Clover配置引导Linux内核.html">
        Clover配置引导Linux内核
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.11c9bfda.js" defer></script><script src="/assets/js/3.3d97394a.js" defer></script><script src="/assets/js/19.6010e3f8.js" defer></script>
  </body>
</html>
